@{
    Layout = null;
}
<!-- Begin page -->
<div class="account-pages my-2 pt-sm-3" data-ng-init="init()">
    <div class="container-fluid">
        <div class="row justify-content-center">

            <div class="row">
                <div class="col-sm-12">
                    <div class="page-title-box">
                        <h4>ภาพรวมข้อมูลลูกค้า</h4>
                    </div>
                </div>
            </div>

            <div class="d-lg-flex">
                <!-- Left sidebar -->
                <div class="chat-leftsidebar card">
                    <div class="mail-list mt-3">
                        <h5 class="font-size-17 mb-1 text-truncate ms-3"><a class="text-dark">ข้อมูลลูกค้าทั้งหมด</a></h5>
                    </div>
                    <div class="p-3">
                        <div class="search-box position-relative">
                            <input type="text" class="form-control rounded border" placeholder="Search...">
                            <i class="mdi mdi-magnify search-icon"></i>
                        </div>
                    </div>
                    <div class="px-2">
                        <h5 class="font-size-15 ms-1 mb-3 ms-3">รายชื่อ ( {{Parameter.Customer.length}} )</h5>
                    </div>
                    <ul class="list-unstyled chat-list p-3 pt-1">
                        <li ng-repeat="values in Parameter.Customer" ng-class="{ 'active' : CustomerSelect.CustomerId == values.CustomerId }">
                            <a class="cursor-pointer" ng-click="OnClickSelectCustomer(values)">
                                <div class="d-flex align-items-center">
                                    <div class="flex-shrink-0 user-img align-self-center me-3">
                                        <div class="avatar align-self-center">
                                            <span class="avatar-title rounded-circle bg-soft-primary  font-size-16 font-size-18"
                                                  ng-class="{ 'text-white' : CustomerSelect.CustomerId == values.CustomerId , 'text-primary' :  CustomerSelect.CustomerId != values.CustomerId}">
                                                {{values.NameSplit}}
                                            </span>
                                        </div>
                                        <span class="user-status"></span>
                                    </div>

                                    <div class="flex-grow-1 overflow-hidden">
                                        <h5 class="text-truncate font-size-15 mb-0 ng-binding font-weight-bold">{{values.ParamModel.Name}} {{values.Name}}</h5>
                                        <p class="mb-0 mt-1 text-truncate" ng-class="{ 'text-white-50' : CustomerSelect.CustomerId == values.CustomerId , 'text-muted' :  CustomerSelect.CustomerId != values.CustomerId}">{{values.CustomerCode}} | ( {{values.TaxId}} ) </p>
                                    </div>
                                    <div class="flex-shrink-0">
                                    </div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- End Left sidebar -->
                <!-- Right Sidebar -->
                <div class="w-100 user-chat mt-4 mt-sm-0 ms-lg-3">

                    <div class="card">
                        <div class="p-3 px-lg-4 border-bottom">
                            <div class="row">
                                <div class="col-xl-10 col-10">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0 avatar me-3 d-sm-block d-none">
                                            <div class="avatar align-self-center">
                                                <span class="avatar-title rounded-circle bg-soft-primary text-primary font-size-16 font-size-18">
                                                    {{CustomerSelect.NameSplit}}
                                                </span>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1">
                                            <h5 class="font-size-16 mb-1 text-truncate mb-2 k-ml-5 font-weight-bold"><a href="#" class="text-dark">{{CustomerSelect.ParamModel.Name}} {{CustomerSelect.Name}} ({{CustomerSelect.TaxId}})</a></h5>
                                            <p class="text-muted text-truncate mb-0">{{CustomerSelect.CustomerCode}} , {{CustomerSelect.Type}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-1 col-2 text-right">
                                    <div class="btn-group me-2 mb-2 mb-sm-0" >
                                        <button type="button" class="btn btn-outline-dark waves-light waves-effect" ui-sref="login"> <i class="mdi mdi-logout"></i></button>
                                    </div>
                                </div>
                                <div class="col-xl-1 col-2 text-right">
                                    <div class="btn-group me-2 mb-2 mb-sm-0" ng-disabled="CustomerSelect == undefined">
                                        <button type="button" class="btn btn-primary waves-light waves-effect" ng-click="OnClickCustomer(CustomerSelect.CustomerId)"> <i class="mdi mdi-arrow-right-thick"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row p-3 ">
                            <div class="col-xl-4 border-bottom">
                                <h5 class="font-size-17 mb-1 text-truncate"><a class="text-dark">ข้อมูลรอบบัญชี</a></h5>
                                <div class="form-input ">
                                    <select class="form-control" id="exampleFormControlSelect11" ng-options="item as item.Year + ' - ' + item.Name for item in Parameter.Period"
                                            ng-model="SelectPeriod" ng-change="OnChangePeriod()">
                                        <option value="" class="text-muted" selected style="display:none">กรุณาเลือก</option>
                                    </select>
                                </div>
                                <div class="col-md-12 mt-3 ms-1">
                                    <div>
                                        <h5>ชื่อรอบบัญชี :  {{TablePeriod.Name}}</h5>
                                        <p class="text-muted mb-0">ประจำปี :  {{TablePeriod.Year}}</p>
                                        <p class="text-muted mb-0">ประจำไตรมาส : {{TablePeriod.Quater}}</p>
                                        <p class="text-muted mb-0">ประเภทรอบบัญชี : {{TablePeriod.Type}}</p>
                                        <p class="text-muted mb-0">วันที่ : {{TablePeriod.Date}}</p>
                                        <p class="text-muted mb-0">ปีเปรียบเทียบ : {{TablePeriod.Mapping}}</p>
                                    </div>
                                </div>
                            </div> <!-- end col -->
                            <div class="col-xl-8 border-bottom">
                                <h5 class="font-size-17 mb-1 text-truncate"><a class="text-dark">ผู้ตรวจสอบทั้งหมด</a></h5>
                                <div class="table-responsive" style="height:210px;">
                                    <table class="table align-middle table-centered table-vertical table-nowrap mb-1">
                                        <tbody>
                                            <tr ng-repeat="values in TablePeriod.AssignEmps">
                                                <td>{{values.EmpCode}}</td>
                                                <td>
                                                    <img src="assets/images/users/user-none.png" alt="user-image" class="avatar-xs me-2 rounded-circle"> {{values.TitleName}} {{values.FirstName}} {{values.LastName}}
                                                </td>
                                                <td>{{values.PermissionName}}</td>
                                            </tr>
                                        </tbody>
                                        <tbody ng-show="TablePeriod.AssignEmps == undefined || TablePeriod.AssignEmps.length == 0">
                                            <tr class="text-center ">
                                                <td colspan="3" class="empty border-none">
                                                    <img src="@Url.Content("~/")assets/images/icons/icon-list.png" width="60" class="d-block m-auto">
                                                    ไม่พบรายการ
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="row p-3 ">
                            <h5 class="font-size-17 mb-1 text-truncate"><a class="text-dark">งานที่ได้รับมอบหมาย / สถานะความคืบหน้า </a></h5>
                            <div class="table-rep-plugin py-2">
                                <div class="table-responsive mb-0" data-pattern="priority-columns">
                                    <table id="tech-companies-1" class="table-data  table-striped font-size-14">
                                        <thead>
                                            <tr class="headerRow">
                                                <th></th>
                                                <th width="30%">รหัส/ชื่อข้อมูล</th>
                                                <th width="10%" class="text-center">ผู้รับผิดชอบ</th>
                                                <th width="15%" class="text-center">Prepare</th>
                                                <th width="15%" class="text-center">Reveiwed</th>
                                                <th width="15%" class="text-center">Auditor</th>
                                                <th width="15%">ความคืบหน้า</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="values in TablePeriod.FSGroups">
                                                <th>{{values.Seq}}</th>
                                                <td>{{values.Code}} - {{values.Name}}</td>
                                                <td class="text-center "><span class="text-link" ng-click="OnClickViewAssign(values)"><i class="mdi mdi-account-circle"></i>คลิกเพื่อดู</span></td>
                                                <td class="text-center">
                                                    <span class="badge font-size-14" ng-class="{ 'bg-info' : values.PrepareStatus == 'Wait',
                                      'bg-success' : values.PrepareStatus == 'Confirm',
                                      'bg-danger' : values.PrepareStatus == 'Back'}">{{values.PrepareStatus}}</span>
                                                </td>
                                                <td class="text-center">
                                                    <span class="badge font-size-14" ng-class="{ 'bg-info' : values.ReveiwedStatus == 'Wait',
                                      'bg-success' : values.ReveiwedStatus == 'Confirm',
                                      'bg-danger' : values.ReveiwedStatus == 'Back'}">{{values.ReveiwedStatus}}</span>
                                                </td>
                                                <td class="text-center">
                                                    <span class="badge font-size-14" ng-class="{ 'bg-info' : values.AuditorStatus == 'Wait',
                                      'bg-success' : values.AuditorStatus == 'Confirm',
                                      'bg-danger' : values.AuditorStatus == 'Back'}">{{values.AuditorStatus}}</span>
                                                </td>
                                                <td>
                                                    <div class="progress" style="height: 24px;">
                                                        <div class="progress-bar bg-success" role="progressbar" style="width:{{values .Percent}}%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">{{values.Percent}}%</div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tbody ng-show="TablePeriod.FSGroups == undefined || TablePeriod.FSGroups.length == 0">
                                            <tr class="text-center ">
                                                <td colspan="8" class="empty">
                                                    <img src="@Url.Content("~/")assets/images/icons/icon-list.png" width="60" class="d-block m-auto">
                                                    ไม่พบรายการ
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <hr />
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- card -->
                </div>
                <!-- end Col-9 -->
            </div>
        </div>
    </div>
</div>
<!-- END layout-wrapper -->
<!-- sample modal content -->
<div id="ModalEmployee" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog  modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title mt-0" id="myModalLabel">
                    ข้อมูลพนักงาน
                </h2>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <h4 class="card-title mt-2 font-size-16 font-weight-bold">ค้นหาข้อมูล</h4>
                    </div>
                    <div class="col-md-6 d-flex flex-wrap  justify-content-end">
                        <button type="button" class="btn-dbd-filter waves-effect " ng-click="OnClickFilterEmployees()"><i class="mdi mdi-magnify me-1"></i>ค้นหา</button>
                    </div>
                </div>
                <div class="row py-2">
                    <div class="col-lg-12 pl-0">
                        <div class="form-input">
                            <input id="name" class="form-element-input form-element-input-show" type="text" placeholder="กรุณาระบุคำค้นหา" ng-model="Search.InputFilterEmployees" />
                            <div class="form-element-bar"></div>
                            <label class="form-element-label" for="name">คำค้นหา</label>
                        </div>
                    </div>
                </div>
                <hr />
                <div class="table-rep-plugin">
                    <div class="table-responsive mb-0" data-pattern="priority-columns">
                        <table id="tech-companies-1" class="table-data  table-striped">
                            <thead>
                                <tr class="headerRow">
                                    <th></th>
                                    <th width="20%">รหัส</th>
                                    <th width="30%">ชื่อ-นามสกุล</th>
                                    <th width="20%">อีเมล</th>
                                    <th width="20%">สิทธิ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="values in TableAddAssign | offset: currentPage_3*itemsPerPage_3 | limitTo: itemsPerPage_3  ">
                                    <th>{{values.Seq}}</th>
                                    <td>{{values.EmployeeData.EmpCode}}</td>
                                    <td width="100px">{{values.EmployeeData.FullName}}</td>
                                    <td>{{values.EmployeeData.Email}}</td>
                                    <td>{{values.PermissionName}}</td>
                                </tr>
                            </tbody>
                            <tbody ng-show=" TableAddAssign == undefined ||  TableAddAssign.length == 0">
                                <tr class="text-center ">
                                    <td colspan="8" class="empty">
                                        <img src="@Url.Content("~/")assets/images/icons/icon-list.png" width="60" class="d-block m-auto">
                                        ไม่พบรายการ
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <hr />
                        <div class="d-flex justify-content-end">
                            <div data-v-e8100c36="" class="numberShow">
                                <p class="mr-2 mx-2 mb-0 font-size-16">แสดง</p>
                                <select class="day form-control form-select form-select-sm" style="width: auto;" ng-change="OnClickChangePageTotal_3()" ng-model="itemsPerPage_3">
                                    <option value="10">10</option>
                                    <option value="22">20</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                                <div data-v-76901dc6="" class="selectInputDropdown noLabel" style="width: 100%;">
                                    <p class="mr-2 mx-2 mb-0 font-size-16">รายการ</p>
                                </div>
                            </div>
                            <div data-v-e8100c36="" class="page-data">
                                <div data-v-e8100c36="" class="prevArrow" ng-class="prevPageDisabled_3()" ng-click="prevPage_3()">
                                    <i data-v-e8100c36="" class="fa fa-chevron-left"></i>
                                </div>
                                <p data-v-e8100c36="" class="mr-2 mx-2 mb-0 font-size-16">หน้า</p>
                                <select class="day form-control form-select form-select-sm" style="width: auto;" ng-options="item as item.name for item in retpage_3" ng-model="changePages_3" ng-change="setPage_3(item)">
                                </select>
                                <div data-v-e8100c36="" class="nextArrow" ng-class="nextPageDisabled_3()" ng-click="nextPage_3()">
                                    <i data-v-e8100c36="" class="fa fa-chevron-right"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light waves-effect px-5 py-2" data-bs-dismiss="modal">ยกเลิก</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
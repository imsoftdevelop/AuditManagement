@{
    Layout = null;
}

<div class="container-fluid" data-ng-init="init()">
    <div class="row">
        <div class="col-sm-12">
            <div class="page-title-box">
                <h4>ร้องขอข้อมูล</h4>
                <ol class="breadcrumb m-0">
                    <li class="breadcrumb-item"><a href="javascript: void(0);">คำขอข้อมูล</a></li>
                    <li class="breadcrumb-item"><a href="javascript: void(0);">ร้องขอข้อมูล</a></li>
                    <li class="breadcrumb-item"><a href="javascript: void(0);">ภาพรวมทั้งหมด</a></li>
                </ol>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xl-12">
            <div class="card">
                <div class="card-body card-body-table">
                    <div class="row">
                        <div class="col-md-6">
                            <h4 class="card-title mb-3">
                                <span class="badge-filter"><i class="mdi mdi-playlist-minus mx-2"></i></span>
                                ตารางข้อมูลร้องขอจากผู้ใช้งาน
                            </h4>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex flex-wrap  justify-content-end">
                                <button type="button" class="btn btn-outline-secondary waves-effect mx-2 py-2 px-3" data-bs-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                                    <i class="mdi mdi-filter-menu-outline mx-2"></i>ค้นหาขั้นสูง
                                </button>
                            </div>
                        </div>
                    </div>
                    <hr />
                    <div class="row py-2 collapse" id="collapseExample">
                        <div class="col-md-4">
                            <h4 class="card-title mb-3">
                                <span class="badge-filter"><i class="mdi mdi-filter mx-2"></i></span>
                                ค้นหาขั้นสูง
                            </h4>
                        </div>
                        <div class="col-md-8">
                            <div class="row justify-content-end px-3">
                                <div class="col-lg-3 pl-0">
                                    <div class="form-input ">
                                        <select class="dropdown2 form-control" id="exampleFormControlSelect11" ng-model="Search.SelectStatus">
                                            <option value="00" class="text-muted" selected style="display:none">ทั้งหมด</option>
                                            <option value="10">รอดำเนินการ</option>
                                            <option value="20">อยู่ระหว่างดำเนินการ</option>
                                        </select>
                                        <label class="form-element-dropdown" for="name">สถานะ</label>
                                    </div>
                                </div>
                                <div class="col-lg-3 pl-0">
                                    <div class="form-input">
                                        <div id="input-search-start" class="input-group-date date datepicker no-border">
                                            <input type="text" class="form-element-input form-element-input-show input-group-addon" ng-model="Search.InputDateStart" onkeydown="return false">
                                            <div class="form-element-bar"></div>
                                            <label class="form-element-label" for="name">วันที่บันทึกเริ่มต้น</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-3 pl-0">
                                    <div class="form-input">
                                        <div id="input-search-end" class="input-group-date date datepicker no-border">
                                            <input type="text" class="form-element-input form-element-input-show input-group-addon" ng-model="Search.InputDateEnd" onkeydown="return false">
                                            <div class="form-element-bar"></div>
                                            <label class="form-element-label" for="name">วันที่บันทึกสิ้นสุด</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr />
                    </div>
                    <div class="row py-2">
                        <div class="col-md-6">
                            <h4 class="card-title mb-3">
                                <span class="badge-filter"><i class="mdi mdi-layers-search mx-2"></i></span>
                                ค้นหา
                            </h4>
                        </div>
                        <div class="col-md-6 ">
                            <div class="row justify-content-end px-3">
                                <div class="col-md-7 gap-3 d-flex">
                                    <div class="input-group">
                                        <div class="input-group-text"><i class="mdi mdi-information" data-bs-toggle="tooltip" data-bs-placement="left" title="เลขที่คำร้อง , เรื่อง , รายละเอียด"></i></div>
                                        <input type="text" class="form-control" autocomplete="off" placeholder="พิมพ์เพื่อค้นหา..." ng-model="Search.InputFilter">
                                    </div>
                                    <button type="button" class="btn-dbd waves-effect " ng-click="OnClickFilter()"><i class="mdi mdi-magnify me-1"></i>ค้นหา</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="table-rep-plugin">
                        <div class="table-responsive mb-0" data-pattern="priority-columns">
                            <table id="tech-companies-1" class="table-data  table-striped">
                                <thead>
                                    <tr class="headerRow">
                                        <th></th>
                                        <th width="5%">เลขที่</th>
                                        <th width="10%">เรื่อง</th>
                                        <th width="25%">รายละเอียด</th>
                                        <th width="15%">วันที่ร้องขอ</th>
                                        <th width="15%">ผู้ร้องขอ</th>
                                        <th class="text-center">สถานะ</th>
                                        <th class="text-center">เพิ่มเติม</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="values in Table | offset: currentPage*itemsPerPage | limitTo: itemsPerPage  "
                                        ng-show="Table != undefined && Table.length >= 0">
                                        <th>{{values.Seq}}</th>
                                        <td ng-click="OnClickTable(values)"><span class="text-link">{{values.RequestId}}</span></td>
                                        <td>{{values.SubjectName}}</td>
                                        <td>
                                            <div class="text-long">{{values.Detail}}</div>
                                        </td>
                                        <td>{{values.RequestDate}}</td>
                                        <td>{{values.FullName}}</td>
                                        <td class="text-center">
                                            <span class="badge font-size-16"
                                                  ng-class="{ 'bg-info' : values.Status == '10' ,
                                                'bg-warning' : values.Status == '20' }">{{values.StatusName}}</span>
                                        </td>
                                        <td class="text-center">
                                            <button type="button" class="btn btn-outline-dark waves-effect waves-light px-3 py-1 dropdown-toggle font-size-15"
                                                    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                ตัวเลือก <i class="mdi mdi-chevron-down"></i>
                                            </button>

                                            <div class="dropdown-menu" aria-labelledby="btnGroupVerticalDrop1" style="">
                                                <a class="dropdown-item font-size-15 cursor-pointer" ng-click="OnClickTable(values)"> <i class="mdi mdi-delete-circle-outline"></i> ดูรายละเอียด</a>
                                                <a ng-show="values.Status == 10" class="dropdown-item font-size-15 cursor-pointer a-status-warning" ng-click="OnClickChangeStatus(values,20)"><i class="mdi mdi-circle-edit-outline"></i> อยู่ระหว่างดำเนินการ</a>
                                                <a ng-show="values.Status == 20" class="dropdown-item font-size-15 cursor-pointer a-status-success" ng-click="OnClickChangeStatus(values,99)"><i class="mdi mdi-circle-edit-outline"></i> ดำเนินการเรียบร้อย</a>
                                                <a class="dropdown-item font-size-15 cursor-pointer a-status-danger" ng-click="OnClickChangeStatus(values,87)"><i class="mdi mdi-circle-edit-outline"></i> ยกเลิก</a>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                                <tbody ng-show="Table == undefined || Table.length == 0">
                                    <tr class="text-center ">
                                        <td colspan="8" class="empty">
                                            <img src="@Url.Content("~/")assets/images/icons/icon-list.png" width="60" class="d-block m-auto">
                                            ไม่พบรายการ
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <hr />
                            <div class="d-flex justify-content-end">
                                <div data-v-e8100c36="" class="numberShow">
                                    <p class="mr-2 mx-2 mb-0 font-size-16">แสดง</p>
                                    <select class="day form-control form-select form-select-sm" style="width: auto;" ng-change="OnClickChangePageTotal()" ng-model="itemsPerPage">
                                        <option value="10">10</option>
                                        <option value="22">20</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select>
                                    <div data-v-76901dc6="" class="selectInputDropdown noLabel" style="width: 100%;">
                                        <p class="mr-2 mx-2 mb-0 font-size-16">รายการ</p>
                                    </div>
                                </div>
                                <div data-v-e8100c36="" class="page-data">
                                    <div data-v-e8100c36="" class="prevArrow" ng-class="prevPageDisabled()" ng-click="prevPage()">
                                        <i data-v-e8100c36="" class="fa fa-chevron-left"></i>
                                    </div>
                                    <p data-v-e8100c36="" class="mr-2 mx-2 mb-0 font-size-16">หน้า</p>
                                    <select class="day form-control form-select form-select-sm" style="width: auto;" ng-options="item as item.name for item in retpage" ng-model="changePages" ng-change="setPage(item)">
                                        @*<option ng-repeat="rows in retpage" value="{{rows.code}}" >{{rows.name}}</option>*@
                                    </select>
                                    <div data-v-e8100c36="" class="nextArrow" ng-class="nextPageDisabled()" ng-click="nextPage()">
                                        <i data-v-e8100c36="" class="fa fa-chevron-right"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- container-fluid -->
</div>

<!-- sample modal content -->
<div id="ModalRequestForm" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
    <div class="modal-dialog  modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title mt-0" id="myModalLabel">
                    แก้ไขการร้องขอข้อมูล
                </h2>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>

            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-8">
                        <div class="d-flex gap-4">
                            <h3 class=" d-flex font-size-14"
                                ng-class="{ 'h3-status-info' : TableAdd.Status == '10' ,
                                                'h3-status-warning' : TableAdd.Status == '20' }">
                                {{TableAdd.StatusName}}
                            </h3>
                            <h3 class="card-title mt-2 font-size-14 font-weight-bold">วันที่ร้องขอ : </h3>
                            <h5 class=" mt-2 font-size-14 font-weight-bold">{{TableAdd.RequestDate}} </h5>
                        </div>
                        <h3 class="card-title mt-2 font-size-16 font-weight-bold">รายละเอียดเรื่อง , เนื่อหาร้องขอข้อมูล</h3>
                    </div>
                    <div class="col-md-4 d-flex flex-wrap  justify-content-end">
                        <div class="form-input">
                            <input id="name" class="form-element-input form-element-input-show" type="text" placeholder="กรุณาระบุเลขที่" ng-model="TableAdd.RequestId" disabled />
                            <div class="form-element-bar"></div>
                            <label class="form-element-label" for="name">เลขที่</label>
                            <label class="form-element-required" for="name">* </label>
                        </div>
                    </div>
                </div>
                <div class="row py-2">
                    <div class="col-lg-12 pl-0">
                        <div class="form-input">
                            <input id="name" class="form-element-input form-element-input-show" type="text" placeholder="กรุณาระบุเลขที่" ng-model="TableAdd.SubjectName" disabled />
                            <div class="form-element-bar"></div>
                            <label class="form-element-label" for="name">เรื่อง</label>
                            <label class="form-element-required" for="name">* </label>
                        </div>
                    </div>
                </div>
                <div class="row py-2">
                    <div class="col-lg-12 pl-0">
                        <div class="form-input">
                            <textarea rows="5" id="name" class="form-element-input form-element-input-textarea  form-element-input-show" disabled
                                      type="input" placeholder="กรุณาระบุรายละเอียด" ng-model="TableAdd.Detail"></textarea>
                            <div class="form-element-bar"></div>
                            <label class="form-element-label" for="name">รายละเอียด</label>
                            <label class="form-element-required" for="name">* </label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <h3 class="card-title mt-2 font-size-16 font-weight-bold">ตอบกลับผู้ร้องขอ</h3>
                    </div>
                </div>
                <div class="row py-2">
                    <div class="col-lg-12 pl-0">
                        <div class="form-input">
                            <textarea rows="5" id="name" class="form-element-input form-element-input-textarea  form-element-input-show"
                                      type="input" placeholder="กรุณาระบุรายละเอียด" ng-model="TableAdd.ResponseMessage"></textarea>
                            <div class="form-element-bar"></div>
                            <label class="form-element-label" for="name">รายละเอียด</label>
                            <label class="form-element-required" for="name">* </label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <h3 class="card-title mt-2 font-size-16 font-weight-bold">ข้อมูลการติดต่อ</h3>
                    </div>
                </div>
                <div class="row py-2">
                    <div class="col-md-6  pl-0">
                        <div class="form-input">
                            <input id="name" class="form-element-input form-element-input-show" type="text" placeholder="กรุณาระบุชื่อ-นามสกุล" ng-model="TableAdd.ContactName" disabled />
                            <div class="form-element-bar"></div>
                            <label class="form-element-label" for="name">ชื่อ-นามสกุล</label>
                            <label class="form-element-required" for="name">* </label>
                        </div>
                    </div>
                    <div class="col-md-6 pl-0">
                        <div class="form-input">
                            <input id="name" class="form-element-input form-element-input-show" type="text" placeholder="กรุณาระบุเบอร์โทรศัพท์" ng-model="TableAdd.ContactMobilePhone" disabled />
                            <div class="form-element-bar"></div>
                            <label class="form-element-label" for="name">เบอร์โทรศัพท์</label>
                            <label class="form-element-required" for="name">* </label>
                        </div>
                    </div>
                </div>
                <div class="row py-2">
                    <div class="col-md-6  pl-0">
                        <div class="form-input">
                            <input id="name" class="form-element-input form-element-input-show" type="text" placeholder="กรุณาระบุอีเมล" ng-model="TableAdd.ContactEmail" disabled />
                            <div class="form-element-bar"></div>
                            <label class="form-element-label" for="name">อีเมล</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light waves-effect px-5 py-2" data-bs-dismiss="modal">ยกเลิก</button>
                @*<button type="button" class="btn btn-primary waves-effect waves-light px-4 py-2 dropdown-toggle" ng-click="OnClickSave()"
                            data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        บันทึกข้อมูล <i class="mdi mdi-chevron-down"></i>
                    </button>

                    <div class="dropdown-menu" aria-labelledby="btnGroupVerticalDrop1" style="">
                        <a class="dropdown-item cursor-pointer" ng-click="OnClickSave('close')">บันทึก และปิดหน้าต่าง</a>
                    </div>*@

                <div class="btn-group">
                    <button type="button" class="btn btn-primary  waves-effect waves-light px-3 py-2 aksorn f-1-2" ng-click="OnClickSave()">บันทึกเอกสาร</button>
                    <button type="button" class="btn btn-primary   waves-effect waves-light px-2 py-1 dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="mdi mdi-chevron-down"></i>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="btnGroupVerticalDrop1" style="">
                        <a class="dropdown-item cursor-pointer" ng-click="OnClickSave('close')">บันทึก และปิดหน้าต่าง</a>
                    </div>
                </div>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<!-- /.modal -->
<!-- sample modal content -->
<div id="ModalConfirm" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
    <div class="modal-dialog  modal-dialog-scrollable">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h2 class="modal-title mt-0" id="myModalLabel">
                    ยืนยันทำรายการ
                </h2>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>

            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <h3 class="card-title mt-2 font-size-16 font-weight-bold">ยืนยันทำรายการเปลี่ยนสถานะข้อมูล เลขที่ : {{TableAdd.RequestId}}</h3>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light waves-effect px-5 py-2" data-bs-dismiss="modal">ยกเลิก</button>
                <button type="button" class="btn btn-primary waves-effect waves-light px-5 py-2" ng-click="OnClickConfirm()">
                    ยืนยัน
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>  
<!-- /.modal -->